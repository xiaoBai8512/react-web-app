{"ast":null,"code":"import axios from 'axios'; // 创建一个 axios 实例\n\nvar service = axios.create({\n  baseURL: process.env.REACT_APP_BASE_URL,\n  // baseURL: '/api',\n  // withCredentials: true, // 跨域请求，允许保存cookie\n  timeout: 100000 // 请求超时时间\n\n}); // HTTPrequest拦截\n\nservice.interceptors.request.use(function (config) {\n  // const { userId, activationCode, latestOrderSn } =\n  var commonData = {\n    showapi_appid: '42222',\n    showapi_sign: '42932bad205a407a8429ba513cfbece1' // showapi_timestamp,\n    // showapi_res_gzip,\n\n  };\n  console.log(23, config);\n  var joinedCommonDataStr = '';\n\n  for (var prop in commonData) {\n    joinedCommonDataStr += \"&\".concat(prop, \"=\").concat(commonData[prop]);\n  }\n\n  if (config.method === 'get') {\n    if (config.url.indexOf('?') > -1) {\n      config.url += joinedCommonDataStr;\n    } else {\n      config.url += '?' + joinedCommonDataStr.substr(1);\n    }\n\n    return config;\n  }\n\n  if (config.method === 'post') {\n    Object.assign(config.data, commonData);\n    return config;\n  }\n}, function (error) {\n  return Promise.reject(error);\n}); // HTTPresponse拦截\n\nservice.interceptors.response.use(function (data) {\n  // console.log('data', data)\n  var res = data.data;\n\n  if (res.status && res.status !== 'SUCCEED') {\n    var errMsg = res.errorMessage;\n\n    if (errMsg) {}\n  } // console.log('data', data)\n\n\n  return data;\n}, function (error) {\n  var errMsg;\n\n  if (error && error.response) {\n    if (error.response.data && error.response.data.status && error.response.data.status === 'FAILED') {\n      errMsg = error.response.data.errorMessage;\n    }\n\n    if (errMsg) {}\n  }\n\n  if (errMsg) {\n    error.message = errMsg;\n  }\n\n  return Promise.reject(error);\n});\nexport default service;","map":null,"metadata":{},"sourceType":"module"}